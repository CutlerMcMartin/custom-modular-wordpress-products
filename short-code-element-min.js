jQuery(document).ready((function(t){var e=[],s=localized_variables.pluginsUrl,i=localized_variables.siteurl,o=["basic-plat","hex-plat","tri-plat"],a=["basic-post","house-post","wall-post"];function r(i){var r,n,p=e[c][2];"plat"==p?n=o:"post"==p&&(n=a),"left"==i?r=0==n.indexOf(e[c][1])?n[n.length-1]:n[n.indexOf(e[c][1])-1]:"right"==i&&(r=n.indexOf(e[c][1])==n.length-1?n[0]:n[n.indexOf(e[c][1])+1]),e[c][1]=r,t("#"+e[c][0]).attr("option",r),t("#"+e[c][0]).children().attr("src",s+"/cat-tree-plugin/assets/tree-icons/"+p+"s/"+r+".svg")}function n(e){t(".tree-component-options").empty(),component_type=t(".cat-tree-svg-ele[position='"+e+"']").attr("plat_post"),"plat"==component_type?component_array=o:"post"==component_type&&(component_array=a),component_array.forEach(e=>{t(".tree-component-options").append("<img class='individual-component-tree-option' option='"+e+"' src='"+s+"/cat-tree-plugin/assets/tree-icons/"+component_type+"s/"+e+".svg'>")})}t(".cat-tree-svg-ele").each((function(){"plat"==t(this).attr("plat_post")&&(o.includes(t(this).attr("option"))?(e.push([t(this).attr("id"),t(this).attr("option"),t(this).attr("plat_post")]),t(this).children().attr("src",s+"/cat-tree-plugin/assets/tree-icons/"+t(this).attr("plat_post")+"s/"+t(this).attr("option")+".svg")):(e.push([t(this).attr("id"),"basic-plat",t(this).attr("plat_post")]),t(this).children().attr("src",s+"/cat-tree-plugin/assets/tree-icons/"+t(this).attr("plat_post")+"s/basic-plat.svg"))),"post"==t(this).attr("plat_post")&&(a.includes(t(this).attr("option"))?(e.push([t(this).attr("id"),t(this).attr("option"),t(this).attr("plat_post")]),t(this).children().attr("src",s+"/cat-tree-plugin/assets/tree-icons/"+t(this).attr("plat_post")+"s/"+t(this).attr("option")+".svg")):(e.push([t(this).attr("id"),"basic-post",t(this).attr("plat_post")]),t(this).children().attr("src",s+"/cat-tree-plugin/assets/tree-icons/"+t(this).attr("plat_post")+"s/basic-post.svg")))})),e=e.reverse();var c=0;n(c),t("#left-arrow-selector").click((function(){r("left")})),t("#right-arrow-selector").click((function(){r("right")})),t("#up-arrow-selector").click((function(){c<e.length-1&&(c+=1),n(c)})),t("#down-arrow-selector").click((function(){c>0&&(c-=1),n(c)})),t("#submit-tree").click((function(){var s="{";e.forEach(t=>{s=s+'"'+t[0]+'":"'+t[1]+'",'}),s=s.slice(0,-1)+"}",jQuery.ajax({type:"POST",url:localized_variables.ajaxurl,data:{action:"ajax_form",tree_json_input:s,post_id:t(this).attr("post_id")}})})),t("#buy-tree").click((function(){var s="{";e.forEach(t=>{s=s+'"'+t[0]+'":"'+t[1]+'",'}),s=s.slice(0,-1)+"}",jQuery.ajax({type:"POST",url:localized_variables.ajaxurl,data:{action:"ajax_form",tree_json_input:s,post_id:t(this).attr("post_id")}});var o=[],a=[],r="",n="";t.getJSON(i+"/wp-json/wp/v2/product",(function(t){t.forEach(t=>{for(let s=0;s<e.length;s++)t.tree_design_object_ID==e[s][1]&&(-1!=o.indexOf(t.id)?a[o.indexOf(t.id)]++:(o.push(t.id),a.push(1)))}),o.forEach(t=>{r=r+t+","}),r=r.slice(0,-1),a.forEach(t=>{n=n+t+","}),n=n.slice(0,-1),console.log(r),console.log(n),jQuery.ajax({type:"POST",url:i+"/cart/?add-to-cart="+r+"&quantities="+n})}))})),t(".cat-tree-svg-ele").click((function(){n(c=t(this).attr("position"))})),t(".tree-component-options").on("click",".individual-component-tree-option",(function(){var i=t(this).attr("option");console.log(c);var o=e[c][2];e[c][1]=i,t("#"+e[c][0]).attr("option",i),t("#"+e[c][0]).children().attr("src",s+"/cat-tree-plugin/assets/tree-icons/"+o+"s/"+i+".svg")}))}));